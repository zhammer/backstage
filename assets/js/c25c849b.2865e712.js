/*! For license information please see c25c849b.2865e712.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[650600],{603905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var r=n(667294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},s="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),s=p(n),d=o,h=s["".concat(c,".").concat(d)]||s[d]||f[d]||i;return n?r.createElement(h,a(a({ref:t},l),{},{components:n})):r.createElement(h,a({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var u={};for(var c in t)hasOwnProperty.call(t,c)&&(u[c]=t[c]);u.originalType=e,u[s]="string"==typeof e?e:o,a[1]=u;for(var p=2;p<i;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},950033:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>u,metadata:()=>p,toc:()=>s});n(827378);var r=n(603905);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const u={id:"provider",title:"GitHub Authentication Provider",sidebar_label:"GitHub",description:"Adding GitHub OAuth as an authentication provider in Backstage"},c=void 0,p={unversionedId:"auth/github/provider",id:"auth/github/provider",title:"GitHub Authentication Provider",description:"Adding GitHub OAuth as an authentication provider in Backstage",source:"@site/../docs/auth/github/provider.md",sourceDirName:"auth/github",slug:"/auth/github/provider",permalink:"/docs/auth/github/provider",draft:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/../docs/auth/github/provider.md",tags:[],version:"current",frontMatter:{id:"provider",title:"GitHub Authentication Provider",sidebar_label:"GitHub",description:"Adding GitHub OAuth as an authentication provider in Backstage"},sidebar:"docs",previous:{title:"Bitbucket",permalink:"/docs/auth/bitbucket/provider"},next:{title:"GitLab",permalink:"/docs/auth/gitlab/provider"}},l={},s=[{value:"Create an OAuth App on GitHub",id:"create-an-oauth-app-on-github",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Adding the provider to the Backstage frontend",id:"adding-the-provider-to-the-backstage-frontend",level:2},{value:"Difference between GitHub Apps and GitHub OAuth Apps",id:"difference-between-github-apps-and-github-oauth-apps",level:2}],f={toc:s};function d(e){var{components:t}=e,n=a(e,["components"]);return(0,r.kt)("wrapper",i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},f,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Backstage ",(0,r.kt)("inlineCode",{parentName:"p"},"core-plugin-api")," package comes with a GitHub authentication\nprovider that can authenticate users using GitHub or GitHub Enterprise OAuth."),(0,r.kt)("h2",{id:"create-an-oauth-app-on-github"},"Create an OAuth App on GitHub"),(0,r.kt)("p",null,"To add GitHub authentication, you must create either a GitHub App, or an OAuth\nApp from the GitHub\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/developers"},"developer settings"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"Homepage URL"),"\nshould point to Backstage's frontend, while the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization callback URL"),"\nwill point to the auth backend."),(0,r.kt)("p",null,"Note that if you're using a GitHub App, the allowed scopes are configured as\npart of that app. This means you need to verify what scopes the plugins you use\nrequire, so be sure to check the plugin READMEs for that information."),(0,r.kt)("p",null,"Settings for local development:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Application name: Backstage (or your custom app name)"),(0,r.kt)("li",{parentName:"ul"},"Homepage URL: ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000")),(0,r.kt)("li",{parentName:"ul"},"Authorization callback URL: ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:7007/api/auth/github/handler/frame"))),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The provider configuration can then be added to your ",(0,r.kt)("inlineCode",{parentName:"p"},"app-config.yaml")," under the\nroot ",(0,r.kt)("inlineCode",{parentName:"p"},"auth")," configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"auth:\n  environment: development\n  providers:\n    github:\n      development:\n        clientId: ${AUTH_GITHUB_CLIENT_ID}\n        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}\n        ## uncomment if using GitHub Enterprise\n        # enterpriseInstanceUrl: ${AUTH_GITHUB_ENTERPRISE_INSTANCE_URL}\n")),(0,r.kt)("p",null,"The GitHub provider is a structure with three configuration keys:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"clientId"),": The client ID that you generated on GitHub, e.g.\n",(0,r.kt)("inlineCode",{parentName:"li"},"b59241722e3c3b4816e2")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"clientSecret"),": The client secret tied to the generated client ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enterpriseInstanceUrl")," (optional): The base URL for a GitHub Enterprise\ninstance, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"https://ghe.<company>.com"),". Only needed for GitHub Enterprise."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callbackUrl")," (optional): The callback URL that GitHub will use when\ninitiating an OAuth flow, e.g.\n",(0,r.kt)("inlineCode",{parentName:"li"},"https://your-intermediate-service.com/handler"),". Only needed if Backstage is\nnot the immediate receiver (e.g. one OAuth app for many backstage instances).")),(0,r.kt)("h2",{id:"adding-the-provider-to-the-backstage-frontend"},"Adding the provider to the Backstage frontend"),(0,r.kt)("p",null,"To add the provider to the frontend, add the ",(0,r.kt)("inlineCode",{parentName:"p"},"githubAuthApi")," reference and\n",(0,r.kt)("inlineCode",{parentName:"p"},"SignInPage")," component as shown in\n",(0,r.kt)("a",{parentName:"p",href:"/docs/auth/#adding-the-provider-to-the-sign-in-page"},"Adding the provider to the sign-in page"),"."),(0,r.kt)("h2",{id:"difference-between-github-apps-and-github-oauth-apps"},"Difference between GitHub Apps and GitHub OAuth Apps"),(0,r.kt)("p",null,"GitHub Apps handle OAuth scope at the app installation level, meaning that the\n",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter for the call to ",(0,r.kt)("inlineCode",{parentName:"p"},"getAccessToken")," in the frontend has no\neffect. When calling ",(0,r.kt)("inlineCode",{parentName:"p"},"getAccessToken")," in open source plugins, one should still\ninclude the appropriate scope, but also document in the plugin README what\nscopes are required for GitHub Apps."))}d.isMDXComponent=!0},862525:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,i){for(var a,u,c=o(e),p=1;p<arguments.length;p++){for(var l in a=Object(arguments[p]))n.call(a,l)&&(c[l]=a[l]);if(t){u=t(a);for(var s=0;s<u.length;s++)r.call(a,u[s])&&(c[u[s]]=a[u[s]])}}return c}},541535:(e,t,n)=>{var r=n(862525),o=60103,i=60106;var a=60109,u=60110,c=60112;var p=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var s=Symbol.for;o=s("react.element"),i=s("react.portal"),s("react.fragment"),s("react.strict_mode"),s("react.profiler"),a=s("react.provider"),u=s("react.context"),c=s("react.forward_ref"),s("react.suspense"),p=s("react.memo"),l=s("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function g(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||h}function y(){}function m(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var v=m.prototype=new y;v.constructor=m,r(v,g.prototype),v.isPureReactComponent=!0;var k={current:null},O=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var r,i={},a=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var p=Array(c),l=0;l<c;l++)p[l]=arguments[l+2];i.children=p}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:a,ref:u,props:i,_owner:k.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var N=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var c=!1;if(null===e)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case i:c=!0}}if(c)return a=a(c=e),e=""===r?"."+P(c,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(N,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var p=0;p<e.length;p++){var l=r+P(u=e[p],p);c+=C(u,t,n,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),p=0;!(u=e.next()).done;)c+=C(u=u.value,t,n,l=r+P(u,p++),a);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function H(e,t,n){if(null==e)return e;var r=[],o=0;return C(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function _(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var E={current:null};function T(){var e=E.current;if(null===e)throw Error(d(321));return e}},827378:(e,t,n)=>{n(541535)}}]);